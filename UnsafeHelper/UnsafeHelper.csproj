<Project Sdk="Microsoft.NET.Sdk">

	<PropertyGroup>
		<AllowUnsafeBlocks>True</AllowUnsafeBlocks>
		<Title>UnsafeHelper</Title>
		<Version>1.0.1</Version>
		<Authors>ilyfairy</Authors>
		<Description>C#不安全方法</Description>
		<GenerateDocumentationFile>true</GenerateDocumentationFile>
		<TargetFrameworks>netstandard2.0;net5.0;net6.0;netcoreapp3.0</TargetFrameworks>
		<DefineConstants>HAS_UNSAFE</DefineConstants>
		<DefineConstants>HAS_SPAN</DefineConstants>
	</PropertyGroup>

	<!-- 为net framework定义宏 -->
	<!--<PropertyGroup Condition="'$(TargetFramework)' == 'net461'">
		<DefineConstants>NET_FRAMEWORK</DefineConstants>
	</PropertyGroup>-->

	<!-- 当目标框架不是net461的时候, 除了net461都支持Span -->
	<!--<PropertyGroup Condition="'$(TargetFramework)' != 'net461'">
		<DefineConstants>HAS_SPAN</DefineConstants>
	</PropertyGroup>-->

	<!--<PropertyGroup Condition="'$(TargetFramework)' == 'netstandard2.0' Or '$(TargetFramework)' == 'net5.0' Or '$(TargetFramework)' == 'net6.0' Or '$(TargetFramework)' == 'netcoreapp3.0'">
		<DefineConstants>HAS_SPAN</DefineConstants>
	</PropertyGroup>-->

	<!-- 除了net standard和net461都支持Nullable -->
	<!--<PropertyGroup Condition="'$(TargetFramework)' != 'net461' And '$(TargetFramework)' != 'netstandard2.0'">
		<DefineConstants>NULLABLE</DefineConstants>
	</PropertyGroup>-->
	<PropertyGroup Condition="'$(TargetFramework)' != 'netstandard2.0'">
		<DefineConstants>NULLABLE</DefineConstants>
	</PropertyGroup>
	
	<!-- net standard需要安装System.Memory支持Span -->
	<ItemGroup Condition="'$(TargetFramework)' == 'netstandard2.0'">
		<PackageReference Include="System.Memory" Version="4.5.5" />
	</ItemGroup>

	<!-- net461需要安装System.Runtime.CompilerServices.Unsafe 支持Unsafe -->
	<!--<ItemGroup Condition="'$(TargetFramework)' == 'net461'">
	  <PackageReference Include="System.Runtime.CompilerServices.Unsafe" Version="6.0.0" />
	</ItemGroup>-->
	
</Project>
